{% extends "base_admin.html" %}


{% block head_additions %}
{{ block.super }}
<style>

@import "{{ media_url }}css/jquery-ui-1.8.6.custom.css";
@import "{{ media_url }}js/datatables/media/css/demo_table_jui.css";
@import "{{ media_url }}js/tabletools/css/TableTools.css";

</style>
<script type="text/javascript" src="{{ media_url }}js/jquery.js"></script> 
<script type="text/javascript" src="{{ media_url }}js/datatables/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="{{ media_url }}js/tabletools/ZeroClipboard/ZeroClipboard.js"></script>
<script type="text/javascript" src="{{ media_url }}js/tabletools/js/TableTools.min.js"></script>
<script type="text/javascript" src="{{ media_url }}js/Apprise/apprise-1.5.js"></script>
<link rel="stylesheet" href="{{ media_url }}js/Apprise/apprise.css" type="text/css" />

<script type="text/javascript">

$(document).ready(function() {
	
	// Set up hover cursor for the two tables
	$('.problem_number_row').hover(function() {
			$(this).css('cursor','pointer');
		}, function() {
			$(this).css('cursor','auto');
	});
	
	// Problem clicks
	$('.problem_number_row').click(function() {
		apprise_info = $(this).attr('apprise_info');
		apprise(apprise_info);
		return false;
	});
	
	TableToolsInit.oFeatures.bXls = false;
	TableToolsInit.oFeatures.bCopy = false;
	TableToolsInit.oFeatures.bPrint = false;
	TableToolsInit.oBom.bXls = false;
	TableToolsInit.iButtonHeight = 12;
	TableToolsInit.iButtonWidth = 12;
	TableToolsInit.sSwfPath = "/media/js/tabletools/swf/ZeroClipboard.swf"
	
	var answers_table = $('#answers_table').dataTable( {
		"bAutoWidth": false,
	    "bJQueryUI": true,
	    "bStateSave": true,
        "bPaginate": false,
        "bLengthChange": false,
		"sDom": 't',
	});
});

</script>
{% endblock %}

{% block content_admin %}

<h1>Answers for {{ student.user.last_name }}</h1>

<p>{{ student.user.last_name }} scored {{ student.score }} of {{ question_count }}.</p>

<table id="answers_table" class="data_table display" cellspacing="0" cellpadding="0">
    <thead>
        <tr>
            <th>Problem</th>
            <th>Answer</th>
        </tr>
        </thead>
		<tbody>
			{% for answer_sheet in answer_sheets %}
			    <tr class="problem_number_row" apprise_info="<p>{{ answer_sheet.problem.text }}</p>

																<table cellspacing='0' cellpadding='5' style='margin: 0 auto''>
																		{% for answer in answer_sheet.problem.sorted_answers %}  
																    	<tr>
																        	<td class='left'><strong>{{ answer.letter|upper }})</strong></td>
																        	<td>{{ answer.text }}</td>
																    	</tr>
																    	{% endfor %}
																</table>">
			        <td class="left">{{ answer_sheet.problem.number }}</td>
			        {% if answer_sheet.answer %}
			        <td>{{ answer_sheet.answer.letter }} {% if answer_sheet.answer.correct %}<img src="{{ media_url }}images/checkmark.gif" style="height:12px;width:12px;">{% endif %}</td>
			        {% else %}
			        <td>No response</td>
			        {% endif %}
			    </tr>
			{% endfor %}
	</tbody>
</table>

{% endblock %}